sudo: true
dist: trusty
language: cpp

matrix:
  include:
    - os: linux
      env: JOB=test ENV=linux
    - os: linux
      env: JOB=deploy ENV=linux
    - os: linux
      env: JOB=deploy ENV=windows ARCH=i686 LIBTYPE=shared
      services:
        - docker
    - os: linux
      env: JOB=deploy ENV=windows ARCH=x86_64 LIBTYPE=shared
      services:
        - docker
    - os: osx
      env: JOB=deploy ENV=osx

install:      .travis/phase $JOB $ENV install
script:       .travis/phase $JOB $ENV script
after_script: .travis/phase $JOB $ENV after_script

branches:
  only:
    - master
